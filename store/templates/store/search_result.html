{% extends "store/base.html" %}
{% load static %}
{% block content %}

<div class="container pt-5 mt-5">
  <form action="{% url 'search-results' %}" method="GET">
    <div class="search-bar row text-center p-4 mt-4">
      <div class="col-md-2 col-sm-12 search">
        <select class="search-select" name="ringsize" active="hai">
          <option value="">Ring size</option>
          {% for item in ringsize %}
            {% if current == item %}
            <option selected="selected" value="{{ item }}">{{ item }}</option>
            {% else %}
            <option value="{{ item }}">{{ item }}</option>

            {% endif %}
          {% endfor %}
      </select>
    </div>
      <div class="col-md-2 col-sm-12 search">
        <select  class="search-select" name="width">
          <option value="">Width</option>
          {% for item in width %}
          <option value="{{ item }}">{{ item }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2 col-sm-12 search">
        <select class="search-select" name="boltpattern"> 
          <option value="">Bolt Pattern</option>
          {% for item in boltpattern %}
          <option value="{{ item }}">{{ item }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2 col-sm-12 search">
        <select class="search-select" name="brand" id="brand_search"> 
          <option value="">Wheel Brand</option>
          {% for item in brand %}
          <option value="{{ item }}">{{ item }}</option>
          {% endfor %}
        </select>
      </div>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
      <script>
        var enable_model = function () {
          if ($("#brand-search").is(":checked")) {
            console.log("hello")
              $('#model-search').prop('disabled',false);
          }
          else {
              $('#model-search').prop('disabled', 'disabled');
          }
        };
        $(enable_model);
        $("#brand-search").change(enable_model);

        // var update_pizza = function () {
        //   $("#model-search").prop("disabled", !$('#brand-search').prop('selected'));
        // };

        // update_pizza();
        // $("#pizza").change(update_pizza);
      </script>
      <div class="col-md-2 search">
        <select class="search-select" name="model" id="model-search"> 
          <option value="">Wheel Model</option>
          {% for item in model %}
          <option value="{{ item }}">{{ item }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary btn-lg btn-block">Search</button>
      </div>
      </div>
    </form>
  <h1 class="text-center  mt-5">Search Result</h1>

    {% for post in posts %}
    <!-- CARD PRODUCTS-->
    
    {% if post.premium.name == 'basic' %}
    <div class="card mb-3">
        {% else %}
    <div class="card hot_card mb-3">
    {% endif %}
        <div class="row no gutters py-3">
          <div class=" col-md-4 text-center">
            <img  class = "wheel-img" src="{{post.wheelimage_set.all.first.image.url}}" alt="">
            {% if post.premium.name == 'premium' %}
            <div class=wheel-tag>HOT</div>
            {% endif %}

          </div>
          <div class="col-md-4 p pl-0">
            <a href="{{ post.get_absolute_url }}"><div class=" wheel-title text-left">{{post}}</div></a>

            <span class="d-inline-block mt-1 text-truncate" style="max-width:100%; color: #838383;">{{post.wheel.description}}
            </span>
            <div class="wheel-title text-dark mt-2" style="font-weight: bold;">Rp.{{post.wheel.price}}</div>
            
            <button type="button " class=" m-0 mt-1 btn btn-primary btn-sm mt-4 mb-1">Add to wishlist</button>
            <div><small>seen by 53 others</small></div>
          </div>
            <div class="col-md-4">
                {% if post.premium.name == 'basic' %}
                <div class="text-center desc_panel">Regular</div>

              {% else %}
              <div class="text-center desc_panel hot">Premium</div>
              {% endif %}

              
              <div class="box text-left p-2 mr-3 mt-3">
                <div class="item-info"> <i class="fas fa-dharmachakra"></i> Bolt pattern : <b>{{post.wheel.bolt_pattern}}</b></div>
                <div class="item-info"><i class="fas fa-ring"></i> Ring size : <b>{{post.wheel.ring_size}}"</b></div>
                <div class="item-info"><i class="fas fa-car-alt"></i> Wheel width : <b>{{post.wheel.width}}"</b></div>
                <div class="item-info"><i class="fas fa-arrows-alt-h"></i> offset :<b>{{post.wheel.offset}} cm</b></div>
              </div>
              <div style="text-align: center;">
              <button type="button " class="mt-3 btn btn-outline-info btn-sm mx-2">Contact</button>
              <button type="button " class="mt-3 btn btn-outline-success btn-sm mx-2">Whatsapp</button>
            </div>
            </div>
        </div>
     </div>
     {% endfor %}
     <!-- CARD PRODUCTS-->
</div>
    
{% endblock %}